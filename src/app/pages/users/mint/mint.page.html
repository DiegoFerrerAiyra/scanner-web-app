<span class="text-color-secondary font-medium mb-5 text-element">Mint by CSV</span>

<section class="info-container">
    <div class="info-separator-container">
        <mdk-card-info [title]="'Edit the template file and re-upload it'" [fullWidth]="true" ></mdk-card-info>
    </div>
</section>
<br>

<div class="col-12">
    <div class="card">
        <div class="card-title">
        <span class="p-input-icon-left mb-2"><i class="pi pi-search"></i><input [formControl]="searchValue" type="text" placeholder="Search by id" class="p-inputtext p-component p-element w-full"></span>
        <section class="buttons-container">
            <button pButton pRipple icon="pi pi-download" type="button" label="Download Template" class="p-button-secondary button-download"
                (click)="downloadTemplateFile()"></button>
        
            <div class="file-upload-container">
                <p-fileUpload mode="basic" [multiple]="true" [accept]="'text/csv'" [maxFileSize]="350000000"
                    (onSelect)="onFileChange($event)"  #fileUpload chooseLabel="Upload" [auto]="true"
                    styleClass=" p-element w-full">
                </p-fileUpload>
            </div>
            <button  pButton [disabled]="disableButton" *ngIf="total" pButton pRipple type="button" label="Submit" class="p-button-info"
                (click)="submitFile()"></button>
        </section>
    </div>
        <p-table [value]="filteredList" scrollDirection="both" [scrollable]="true" scrollHeight="400px" styleClass="mt-3"
            responsiveLayout="scroll">
            <ng-template pTemplate="header">
                <tr>
                    <th style="width:200px" alignFrozen="left" pFrozenColumn>User id</th>
                    <th style="width:200px">Amount</th>
                    <th style="width:200px">Currency</th>
                    <th style="width:200px">Reason</th>
                    <th style="width:200px">Status</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-customer>
                <tr>
                    <td style="width:200px" pFrozenColumn class="font-bold">{{customer.user_id}}</td>
                    <td style="width:200px" alignFrozen="left" pFrozenColumn>{{customer.amount}}</td>
                    <td style="width:200px">{{customer.currency}}</td>
                    <td style="width:200px">{{customer.concept_id}}</td>
                    <td style="width:200px">
                        <span [class]=" 'customer-badge ' + customer.status"     [pTooltip]="customer?.errorMessage" 
                        >{{customer.status}}</span>
                    </td>

                </tr>
            </ng-template>
        </p-table>
        <section class="file-totals-container">
            <div class="customer-badge" *ngIf="total > 0">total:{{total}}</div>
            <div class="customer-badge success " (click)="downloadCsvSuccess()" *ngIf="success > 0"><i  class="pi pi-download"></i>success: {{success}}</div>
            <div class="customer-badge error" (click)="downloadCsvErrors()" *ngIf="errors > 0"><i  class="pi pi-download"></i>errors: {{errors}}</div>
        </section>
    </div>
</div>
